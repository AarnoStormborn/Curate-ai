# Curate AI - Cron Scheduler Configuration
# Using Ofelia (Docker-based scheduler)
# https://github.com/mcuadros/ofelia

[global]

# ---------------------------------------------------------------------------
# Job: Run Curate AI Pipeline
# ---------------------------------------------------------------------------
[job-exec "curate-ai-run"]
# Run every 2 days at 6:00 AM UTC
schedule = 0 6 */2 * *
container = curate-ai-app
command = python -m curate_ai.run
# Timeout after 30 minutes
timeout = 1800

# ---------------------------------------------------------------------------
# Job: Database Cleanup (Weekly)
# ---------------------------------------------------------------------------
[job-exec "db-cleanup"]
# Run every Sunday at 3:00 AM UTC
schedule = 0 3 * * 0
container = curate-ai-app
command = python -c "from curate_ai.db import cleanup_old_runs; import asyncio; asyncio.run(cleanup_old_runs(days=30))"
timeout = 300

# ---------------------------------------------------------------------------
# Alternative: Direct cron syntax for Linux host
# ---------------------------------------------------------------------------
# If not using Ofelia, add this to your host's crontab:
# 
# # Run Curate AI every 2 days at 6 AM
# 0 6 */2 * * cd /path/to/curate-ai && docker-compose exec -T curate-ai python -m curate_ai.run >> /var/log/curate-ai.log 2>&1
#
# # Alternative: trigger via docker run
# 0 6 */2 * * docker run --rm --env-file /path/to/.env curate-ai:latest python -m curate_ai.run
